#!/command/with-contenv bashio
# Start the CHARLES Hub API (FastAPI/uvicorn)
set -euo pipefail

# Listen on configured ingress port
PORT="$(bashio::addon.ingress_port)"

bashio::log.info "Starting CHARLES Hub API on port ${PORT}"
cd /usr/src/app
exec /opt/venv/bin/uvicorn main:app --host 0.0.0.0 --port "${PORT}" --proxy-headers
